[Unit]
Description=vLLM API Server
After=network.target

[Service]
Type=simple
User=%USER%
WorkingDirectory=%VLLM_HOME%
Environment="PATH=%VLLM_HOME%/venv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
Environment="PYTHONPATH=%VLLM_HOME%/scripts"
Environment="HF_HOME=%VLLM_HOME%/.cache/huggingface"
ExecStart=%VLLM_HOME%/venv/bin/python %VLLM_HOME%/scripts/vllm_server.py --host 0.0.0.0 --port %PORT% --model-dir %VLLM_HOME%/models --config %VLLM_HOME%/config/model_config.json --tensor-parallel-size %TP_SIZE% --gpu-memory-utilization %GPU_MEM%
Restart=on-failure
RestartSec=5s

[Install]
WantedBy=multi-user.target
